(function(){if(window.goatcounter&&window.goatcounter.vars)window.goatcounter=window.goatcounter.vars;else window.goatcounter=window.goatcounter||{};var E=document.querySelector("script[data-goatcounter]");if(E&&E.dataset.goatcounterSettings){try{var H=JSON.parse(E.dataset.goatcounterSettings)}catch(q){console.error("invalid JSON in data-goatcounter-settings: "+q)}for(var F in H)if(["no_onload","no_events","allow_local","allow_frame","path","title","referrer","event"].indexOf(F)>-1)window.goatcounter[F]=H[F]}var C=encodeURIComponent,L=function(q){var x={p:q.path===void 0?goatcounter.path:q.path,r:q.referrer===void 0?goatcounter.referrer:q.referrer,t:q.title===void 0?goatcounter.title:q.title,e:!!(q.event||goatcounter.event),s:[window.screen.width,window.screen.height,window.devicePixelRatio||1],b:M(),q:location.search},z,A,B;if(typeof x.r==="function")z=x.r;if(typeof x.t==="function")B=x.t;if(typeof x.p==="function")A=x.p;if(G(x.r))x.r=document.referrer;if(G(x.t))x.t=document.title;if(G(x.p))x.p=J();if(z)x.r=z(x.r);if(B)x.t=B(x.t);if(A)x.p=A(x.p);return x},G=function(q){return q===null||q===void 0||typeof q==="function"},M=function(){var q=window,x=document;if(q.callPhantom||q._phantom||q.phantom)return 150;if(q.__nightmare)return 151;if(x.__selenium_unwrapped||x.__webdriver_evaluate||x.__driver_evaluate)return 152;if(navigator.webdriver)return 153;return 0},N=function(q){var x=[];for(var z in q)if(q[z]!==""&&q[z]!==null&&q[z]!==void 0&&q[z]!==!1)x.push(C(z)+"="+C(q[z]));return"?"+x.join("&")},D=function(q){if(console&&"warn"in console)console.warn("goatcounter: "+q)},I=function(){var q=document.querySelector("script[data-goatcounter]");if(q&&q.dataset.goatcounter)return q.dataset.goatcounter;return goatcounter.endpoint||window.counter},J=function(){var q=location,x=document.querySelector('link[rel="canonical"][href]');if(x){var z=document.createElement("a");if(z.href=x.href,z.hostname.replace(/^www\./,"")===location.hostname.replace(/^www\./,""))q=z}return q.pathname+q.search||"/"},K=function(q){if(document.body===null)document.addEventListener("DOMContentLoaded",function(){q()},!1);else q()};if(goatcounter.filter=function(){if("visibilityState"in document&&document.visibilityState==="prerender")return"visibilityState";if(!goatcounter.allow_frame&&location!==parent.location)return"frame";if(!goatcounter.allow_local&&location.hostname.match(/(localhost$|^127\.|^10\.|^172\.(1[6-9]|2[0-9]|3[0-1])\.|^192\.168\.|^0\.0\.0\.0$)/))return"localhost";if(!goatcounter.allow_local&&location.protocol==="file:")return"localfile";if(localStorage&&localStorage.getItem("skipgc")==="t")return"disabled with #toggle-goatcounter";return!1},window.goatcounter.url=function(q){var x=L(q||{});if(x.p===null)return;x.rnd=Math.random().toString(36).substr(2,5);var z=I();if(!z)return D("no endpoint found");return z+N(x)},window.goatcounter.count=function(q){var x=goatcounter.filter();if(x)return D("not counting because of: "+x);var z=goatcounter.url(q);if(!z)return D("not counting because path callback returned null");if(!navigator.sendBeacon(z)){var A=document.createElement("img");A.src=z,A.style.position="absolute",A.style.bottom="0px",A.style.width="1px",A.style.height="1px",A.loading="eager",A.setAttribute("alt",""),A.setAttribute("aria-hidden","true");var B=function(){if(A&&A.parentNode)A.parentNode.removeChild(A)};A.addEventListener("load",B,!1),document.body.appendChild(A)}},window.goatcounter.get_query=function(q){var x=location.search.substr(1).split("&");for(var z=0;z<x.length;z++)if(x[z].toLowerCase().indexOf(q.toLowerCase()+"=")===0)return x[z].substr(q.length+1)},window.goatcounter.bind_events=function(){if(!document.querySelectorAll)return;var q=function(x){return function(){goatcounter.count({event:!0,path:x.dataset.goatcounterClick||x.name||x.id||"",title:x.dataset.goatcounterTitle||x.title||(x.innerHTML||"").substr(0,200)||"",referrer:x.dataset.goatcounterReferrer||x.dataset.goatcounterReferral||""})}};Array.prototype.slice.call(document.querySelectorAll("*[data-goatcounter-click]")).forEach(function(x){if(x.dataset.goatcounterBound)return;var z=q(x);x.addEventListener("click",z,!1),x.addEventListener("auxclick",z,!1),x.dataset.goatcounterBound="true"})},window.goatcounter.visit_count=function(q){K(function(){if(q=q||{},q.type=q.type||"html",q.append=q.append||"body",q.path=q.path||J(),q.attr=q.attr||{width:"200",height:q.no_branding?"60":"80"},q.attr.src=I()+"er/"+C(q.path)+"."+C(q.type)+"?",q.no_branding)q.attr.src+="&no_branding=1";if(q.style)q.attr.src+="&style="+C(q.style);if(q.start)q.attr.src+="&start="+C(q.start);if(q.end)q.attr.src+="&end="+C(q.end);var x={png:"img",svg:"img",html:"iframe"}[q.type];if(!x)return D("visit_count: unknown type: "+q.type);if(q.type==="html")q.attr.frameborder="0",q.attr.scrolling="no";var z=document.createElement(x);for(var A in q.attr)z.setAttribute(A,q.attr[A]);var B=document.querySelector(q.append);if(!B)return D("visit_count: append not found: "+q.append);B.appendChild(z)})},location.hash==="#toggle-goatcounter")if(localStorage.getItem("skipgc")==="t")localStorage.removeItem("skipgc","t"),alert("GoatCounter tracking is now ENABLED in this browser.");else localStorage.setItem("skipgc","t"),alert("GoatCounter tracking is now DISABLED in this browser until "+location+" is loaded again.");if(!goatcounter.no_onload)K(function(){if(!("visibilityState"in document)||document.visibilityState==="visible")goatcounter.count();else{var q=function(x){if(document.visibilityState!=="visible")return;document.removeEventListener("visibilitychange",q),goatcounter.count()};document.addEventListener("visibilitychange",q)}if(!goatcounter.no_events)goatcounter.bind_events()})})();
